

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pntl.tools &mdash; practNLPTools-lite 0.2.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> practNLPTools-lite
          

          
          </a>

          
            
            
              <div class="version">
                0.2.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../readme.html">practNLPTools-lite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli.html">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../environment.html">Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../db/readme.html">Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../issues.html">Issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../stanford_installing_issues.html">Stanford Parser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">CHANGELOG</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Credits</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">practNLPTools-lite</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>pntl.tools</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pntl.tools</h1><div class="highlight"><pre>
<span></span><span class="c1"># encoding: utf-8</span>
<span class="c1"># Practical Natural Language Processing Tools (practNLPTools-lite):</span>
<span class="c1">#               Combination of Senna and Stanford dependency Extractor</span>
<span class="c1"># Copyright (C) 2018 PractNLP-lite Project</span>
<span class="c1"># Current Author: Jawahar S &lt;jawahar273@gmail.com&gt;</span>
<span class="c1"># URL: https://github.com/jawahar273</span>


<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">generators</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">unicode_literals</span>
<span class="kn">import</span> <span class="nn">subprocess</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">platform</span> <span class="k">import</span> <span class="n">architecture</span><span class="p">,</span> <span class="n">system</span>


<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">colorama</span> <span class="k">import</span> <span class="n">init</span>
    <span class="kn">from</span> <span class="nn">colorama.Fore</span> <span class="k">import</span> <span class="n">RED</span><span class="p">,</span> <span class="n">BLUE</span>

    <span class="n">init</span><span class="p">(</span><span class="n">autoreset</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">RED</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
    <span class="n">BLUE</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>


<div class="viewcode-block" id="Annotator"><a class="viewcode-back" href="../../annotator_api.html#pntl.tools.Annotator">[docs]</a><span class="k">class</span> <span class="nc">Annotator</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    :Class:~pntl.Annotator is a class which</span>
<span class="sd">    holds the nessary function.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">senna_dir</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">stp_dir</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">dep_model</span><span class="o">=</span><span class="s2">&quot;edu.stanford.nlp.trees.EnglishGrammaticalStructure&quot;</span><span class="p">,</span>
        <span class="n">raise_e</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">save_all</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">env</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">env_path</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;please replace the path/dirs of yours</span>
<span class="sd">        (according to Operating system&#39;s fromat)</span>

<span class="sd">    :param str senna_path: path for senna location \n</span>
<span class="sd">    :param str dep_model: stanford dependency parser model \t</span>
<span class="sd">     default=&#39;edu.stanford.nlp.trees.EnglishGrammaticalStructure&#39;</span>
<span class="sd">    \n</span>
<span class="sd">    :param str or list sent: the sentence to process with Senna \n</span>
<span class="sd">    :param bool batch:  processing more than one sentence</span>
<span class="sd">       in one row \n</span>
<span class="sd">    :param str stp_dir: location of stanford-parser.jar file</span>
<span class="sd">    :param bool init: downlard files from github.</span>
<span class="sd">    :param bool env: status for reading environment file.</span>
<span class="sd">    :param str env_path: location of the environment file.</span>
<span class="sd">    :param bool save_all: save into the database</span>

<span class="sd">    .. note::</span>
<span class="sd">    The default file for environment variable is consider</span>
<span class="sd">    as `.env`. If you have `.env` in diffrent path then is</span>
<span class="sd">    it is good way to pass the location alone with file name.</span>

<span class="sd">    .. bash::</span>
<span class="sd">        # for linux</span>
<span class="sd">        # /home/user_name/.env</span>

<span class="sd">        # for windows</span>
<span class="sd">        # C://user_name//.env</span>

<span class="sd">        # this is a example for idea purpose.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">dep_par_path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_point</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_all</span> <span class="o">=</span> <span class="n">save_all</span>

        <span class="c1"># quick ref:- review needed</span>
        <span class="k">if</span> <span class="n">env</span><span class="p">:</span>

            <span class="kn">from</span> <span class="nn">dotenv</span> <span class="k">import</span> <span class="n">load_dotenv</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">env_path</span><span class="p">:</span>

                <span class="kn">from</span> <span class="nn">os</span> <span class="k">import</span> <span class="n">getcwd</span>
                <span class="kn">from</span> <span class="nn">pathlib</span> <span class="k">import</span> <span class="n">Path</span>

                <span class="n">env_path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">getcwd</span><span class="p">())</span> <span class="o">/</span> <span class="s2">&quot;.env&quot;</span>

            <span class="n">load_dotenv</span><span class="p">(</span><span class="n">dotenv_path</span><span class="o">=</span><span class="n">env_path</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">senna_dir</span><span class="p">:</span>

            <span class="k">if</span> <span class="s2">&quot;SENNA&quot;</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">:</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;SENNA&quot;</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
                <span class="n">exe_file_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_senna_bin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">exe_file_2</span><span class="p">):</span>

                    <span class="k">raise</span> <span class="ne">OSError</span><span class="p">(</span>
                        <span class="n">RED</span> <span class="o">+</span> <span class="s2">&quot;Senna executable expected at </span><span class="si">%s</span><span class="s2"> or&quot;</span>
                        <span class="s2">&quot; </span><span class="si">%s</span><span class="s2"> but not found&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span><span class="p">,</span> <span class="n">exe_file_2</span><span class="p">)</span>
                    <span class="p">)</span>

        <span class="k">elif</span> <span class="n">senna_dir</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">):</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="n">senna_dir</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span> <span class="o">=</span> <span class="n">senna_dir</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">)</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">stp_dir</span><span class="p">:</span>

            <span class="kn">import</span> <span class="nn">pntl.tools</span> <span class="k">as</span> <span class="nn">Tfile</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dep_par_path</span> <span class="o">=</span> <span class="n">Tfile</span><span class="o">.</span><span class="vm">__file__</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check_stp_jar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dep_par_path</span><span class="p">,</span> <span class="n">raise_e</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dep_par_path</span> <span class="o">=</span> <span class="n">stp_dir</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">check_stp_jar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dep_par_path</span><span class="p">,</span> <span class="n">raise_e</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">dep_par_model</span> <span class="o">=</span> <span class="n">dep_model</span>
        <span class="c1"># print(dep_model)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">default_jar_cli</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;java&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-cp&quot;</span><span class="p">,</span>
            <span class="s2">&quot;stanford-parser.jar&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dep_par_model</span><span class="p">,</span>
            <span class="s2">&quot;-treeFile&quot;</span><span class="p">,</span>
            <span class="s2">&quot;in.parse&quot;</span><span class="p">,</span>
            <span class="s2">&quot;-collapsed&quot;</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">print_values</span><span class="p">()</span>

<div class="viewcode-block" id="Annotator.print_values"><a class="viewcode-back" href="../../annotator_api.html#pntl.tools.Annotator.print_values">[docs]</a>    <span class="k">def</span> <span class="nf">print_values</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; displays the current set of values</span>
<span class="sd">        such as SENNA location, stanford parser jar,</span>
<span class="sd">        jar command interface</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;**&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;default values:</span><span class="se">\n</span><span class="s2">senna path:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span><span class="p">,</span>
            <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Dependencie parser:</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">dep_par_path</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="c1"># print(self.default_jar_cli)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Stanford parser clr&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_jar_cli</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;**&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span></div>

<div class="viewcode-block" id="Annotator.check_stp_jar"><a class="viewcode-back" href="../../annotator_api.html#pntl.tools.Annotator.check_stp_jar">[docs]</a>    <span class="k">def</span> <span class="nf">check_stp_jar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">raise_e</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">_rec</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Check the stanford parser is present in the given directions</span>
<span class="sd">        and nested searching will be added in futurwork</span>

<span class="sd">        :param str path: path of where the stanford parser is present</span>
<span class="sd">        :param bool raise_e: to raise exception with user</span>
<span class="sd">              wise and default `False` don&#39;t raises exception</span>
<span class="sd">        :return: given path if it is valid one or return boolean `False` or</span>
<span class="sd">             if raise FileNotFoundError on raise_exp=True</span>
<span class="sd">        :rtype: bool</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">gpath</span> <span class="o">=</span> <span class="n">path</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
        <span class="n">file_found</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>

            <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.jar&quot;</span><span class="p">):</span>

                <span class="k">if</span> <span class="n">file</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;stanford-parser&quot;</span><span class="p">):</span>

                    <span class="n">file_found</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">file_found</span><span class="p">:</span>

            <span class="c1"># need to check the install dir for stanfor parser</span>
            <span class="k">if</span> <span class="n">_rec</span><span class="p">:</span>

                <span class="kn">import</span> <span class="nn">pntl</span>

                <span class="n">path_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">pntl</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">check_stp_jar</span><span class="p">(</span><span class="n">path_</span><span class="p">,</span> <span class="n">raise_e</span><span class="p">,</span> <span class="n">_rec</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">raise_e</span><span class="p">:</span>

                <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
                    <span class="n">RED</span> <span class="o">+</span> <span class="s2">&quot;`stanford-parser.jar` is &quot;</span>
                    <span class="s2">&quot;not&quot;</span>
                    <span class="s2">&quot; found in the path </span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="s2">&quot;`</span><span class="si">{}</span><span class="s2">` </span><span class="se">\n</span><span class="s2">&quot;</span>
                    <span class="s2">&quot;To know about more about the issues,&quot;</span>
                    <span class="s2">&quot;got to this given link [&quot;</span>
                    <span class="s2">&quot;http://pntl.readthedocs.io/en/&quot;</span>
                    <span class="s2">&quot;latest/stanford_installing_&quot;</span>
                    <span class="s2">&quot;issues.html] </span><span class="se">\n</span><span class="s2"> User &quot;</span>
                    <span class="s2">&quot;`pntl -I true` to downlard &quot;</span>
                    <span class="s2">&quot;needed file automatically.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">gpath</span><span class="p">)</span>
                <span class="p">)</span>

        <span class="k">return</span> <span class="n">file_found</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">stp_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The return the path of stanford parser jar location</span>
<span class="sd">        and set the path for Dependency Parse at run time(</span>
<span class="sd">        this is python @property)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dep_par_path</span>

    <span class="nd">@stp_dir</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">stp_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">dep_par_path</span> <span class="o">=</span> <span class="n">val</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">senna_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The return the path of senna location</span>
<span class="sd">        and set the path for senna at run time(this is python @property)</span>

<span class="sd">        :rtype: string</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span>

    <span class="nd">@senna_dir</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">senna_dir</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>

        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span> <span class="o">=</span> <span class="n">val</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">jar_cli</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The return cli for standford-parser.jar(this is python @property)</span>

<span class="sd">        :rtype: string</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">default_jar_cli</span><span class="p">)</span>

    <span class="nd">@jar_cli</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">jar_cli</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">val</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">default_jar_cli</span> <span class="o">=</span> <span class="n">val</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

<div class="viewcode-block" id="Annotator.get_senna_bin"><a class="viewcode-back" href="../../annotator_api.html#pntl.tools.Annotator.get_senna_bin">[docs]</a>    <span class="k">def</span> <span class="nf">get_senna_bin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">os_name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        get the current os executable binary file.</span>

<span class="sd">        :param str os_name: os name like Linux, Darwin, Windows</span>
<span class="sd">        :return: the corresponding exceutable object file of senna</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">os_name</span> <span class="o">==</span> <span class="s2">&quot;Linux&quot;</span><span class="p">:</span>

            <span class="n">bits</span> <span class="o">=</span> <span class="n">architecture</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">bits</span> <span class="o">==</span> <span class="s2">&quot;64bit&quot;</span><span class="p">:</span>

                <span class="n">executable</span> <span class="o">=</span> <span class="s2">&quot;senna-linux64&quot;</span>

            <span class="k">elif</span> <span class="n">bits</span> <span class="o">==</span> <span class="s2">&quot;32bit&quot;</span><span class="p">:</span>

                <span class="n">executable</span> <span class="o">=</span> <span class="s2">&quot;senna-linux32&quot;</span>

            <span class="k">else</span><span class="p">:</span>

                <span class="n">executable</span> <span class="o">=</span> <span class="s2">&quot;senna&quot;</span>

        <span class="k">elif</span> <span class="n">os_name</span> <span class="o">==</span> <span class="s2">&quot;Darwin&quot;</span><span class="p">:</span>

            <span class="n">executable</span> <span class="o">=</span> <span class="s2">&quot;senna-osx&quot;</span>

        <span class="k">elif</span> <span class="n">os_name</span> <span class="o">==</span> <span class="s2">&quot;Windows&quot;</span><span class="p">:</span>

            <span class="n">executable</span> <span class="o">=</span> <span class="s2">&quot;senna-win32.exe&quot;</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span> <span class="o">+</span> <span class="n">executable</span></div>

<div class="viewcode-block" id="Annotator.help_conll_format"><a class="viewcode-back" href="../../annotator_api.html#pntl.tools.Annotator.help_conll_format">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">help_conll_format</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;With the help of this method, detail of senna</span>
<span class="sd">         arguments are displayed</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_conll_format</span><span class="o">.</span><span class="vm">__doc__</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="Annotator.get_conll_format"><a class="viewcode-back" href="../../annotator_api.html#pntl.tools.Annotator.get_conll_format">[docs]</a>    <span class="k">def</span> <span class="nf">get_conll_format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sentence</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="s2">&quot;-srl -pos -ner -chk -psg&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Communicates with senna through lower level communiction</span>
<span class="sd">        (sub process) and converted the console output(default is file writing)</span>
<span class="sd">        with CoNLL format and argument to be in `options` pass</span>

<span class="sd">        :param str or list: list of sentences for batch processes</span>
<span class="sd">        :param  options list: list of arguments</span>

<span class="sd">        +--------------+-----------------------------------------------+</span>
<span class="sd">        | options      | desc                                          |</span>
<span class="sd">        +==============+===============================================+</span>
<span class="sd">        | -verbose     | Display model informations (on the standard   |</span>
<span class="sd">        |              | error output, so it does not mess up the tag  |</span>
<span class="sd">        |              | outputs).                                     |</span>
<span class="sd">        +--------------+-----------------------------------------------+</span>
<span class="sd">        | -notokentags | Do not output tokens (first output column).   |</span>
<span class="sd">        +--------------+-----------------------------------------------+</span>
<span class="sd">        | -offsettags  | Output start/end character offset (in the     |</span>
<span class="sd">        |              | sentence), for each token.                    |</span>
<span class="sd">        +--------------+-----------------------------------------------+</span>
<span class="sd">        | -iobtags     | Output IOB tags instead of IOBES.             |</span>
<span class="sd">        +--------------+-----------------------------------------------+</span>
<span class="sd">        | -brackettags | Output ‘bracket’ tags instead of IOBES.       |</span>
<span class="sd">        +--------------+-----------------------------------------------+</span>
<span class="sd">        | -path        | Specify the path to the SENNA data and hash   |</span>
<span class="sd">        |              | directories, if you do not run SENNA in its   |</span>
<span class="sd">        |              | original directory. The path must end by “/”. |</span>
<span class="sd">        +--------------+-----------------------------------------------+</span>
<span class="sd">        | -usrtokens   | Use user’s tokens (space separated) instead   |</span>
<span class="sd">        |              | of SENNA tokenizer.                           |</span>
<span class="sd">        +--------------+-----------------------------------------------+</span>
<span class="sd">        | -posvbs      | Use verbs outputed by the POS tagger instead  |</span>
<span class="sd">        |              | of SRL style verbs for SRL task. You might    |</span>
<span class="sd">        |              | want to use this, as the SRL training task    |</span>
<span class="sd">        |              | ignore some verbs (many “be” and “have”)      |</span>
<span class="sd">        |              | which might be not what you want.             |</span>
<span class="sd">        +--------------+-----------------------------------------------+</span>
<span class="sd">        | -usrvbs      | Use user’s verbs (given in ) instead of SENNA |</span>
<span class="sd">        |              | verbs for SRL task. The file must contain one |</span>
<span class="sd">        |              | line per token, with an empty line between    |</span>
<span class="sd">        |              | each sentence. A line which is not a “-”      |</span>
<span class="sd">        |              | corresponds to a verb.                        |</span>
<span class="sd">        +--------------+-----------------------------------------------+</span>
<span class="sd">        | -pos         | Instead of outputing tags for all tasks,      |</span>
<span class="sd">        |              | SENNA will output tags for the specified (one |</span>
<span class="sd">        |              | or more) tasks.                               |</span>
<span class="sd">        +--------------+-----------------------------------------------+</span>
<span class="sd">        | -chk         | Instead of outputing tags for all tasks,      |</span>
<span class="sd">        |              | SENNA will output tags for the specified (one |</span>
<span class="sd">        |              | or more) tasks.                               |</span>
<span class="sd">        +--------------+-----------------------------------------------+</span>
<span class="sd">        | -ner         | Instead of outputing tags for all tasks,      |</span>
<span class="sd">        |              | SENNA will output tags for the specified (one |</span>
<span class="sd">        |              | or more) tasks.                               |</span>
<span class="sd">        +--------------+-----------------------------------------------+</span>
<span class="sd">        | -srl         | Instead of outputing tags for all tasks,      |</span>
<span class="sd">        |              | SENNA will output tags for the specified (one |</span>
<span class="sd">        |              | or more) tasks.                               |</span>
<span class="sd">        +--------------+-----------------------------------------------+</span>
<span class="sd">        | -psg         | Instead of outputing tags for all tasks,      |</span>
<span class="sd">        |              | SENNA will output tags for the specified (one |</span>
<span class="sd">        |              | or more) tasks.                               |</span>
<span class="sd">        +--------------+-----------------------------------------------+</span>

<span class="sd">        :return: senna tagged output</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">options</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">options</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

        <span class="n">input_data</span> <span class="o">=</span> <span class="n">sentence</span>
        <span class="n">package_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span><span class="p">)</span>
        <span class="n">os_name</span> <span class="o">=</span> <span class="n">system</span><span class="p">()</span>
        <span class="n">executable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_senna_bin</span><span class="p">(</span><span class="n">os_name</span><span class="p">)</span>
        <span class="n">senna_executable</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">executable</span><span class="p">)</span>
        <span class="c1"># print(&quot;testing dir&quot;, executable, package_directory)</span>
        <span class="n">cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">package_directory</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">senna_executable</span><span class="p">]</span>
        <span class="n">args</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">options</span><span class="p">)</span>
        <span class="n">pipe</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
            <span class="n">args</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="n">senna_stdout</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">communicate</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">cwd</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">senna_stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span></div>

<div class="viewcode-block" id="Annotator.get_senna_tag"><a class="viewcode-back" href="../../annotator_api.html#pntl.tools.Annotator.get_senna_tag">[docs]</a>    <span class="k">def</span> <span class="nf">get_senna_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_data</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Communicates with senna through lower level communiction(sub process)</span>
<span class="sd">        and converted the console output(default is file writing)</span>

<span class="sd">        :param str/list input_data : list of sentences for batch processes</span>
<span class="sd">        :return: senna tagged output</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">input_data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>

            <span class="n">input_data</span> <span class="o">=</span> <span class="n">input_data</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>

        <span class="n">package_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span><span class="p">)</span>
        <span class="c1"># print(&quot;testing dir&quot;,self.dep_par_path, package_directory)</span>
        <span class="n">os_name</span> <span class="o">=</span> <span class="n">system</span><span class="p">()</span>
        <span class="n">executable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_senna_bin</span><span class="p">(</span><span class="n">os_name</span><span class="p">)</span>
        <span class="n">senna_executable</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">package_directory</span><span class="p">,</span> <span class="n">executable</span><span class="p">)</span>
        <span class="n">cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">package_directory</span><span class="p">)</span>
        <span class="n">pipe</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
            <span class="n">senna_executable</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="n">senna_stdout</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">communicate</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">cwd</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">senna_stdout</span></div>

<div class="viewcode-block" id="Annotator.get_senna_tag_batch"><a class="viewcode-back" href="../../annotator_api.html#pntl.tools.Annotator.get_senna_tag_batch">[docs]</a>    <span class="k">def</span> <span class="nf">get_senna_tag_batch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sentences</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Communicates with senna through lower level communiction(sub process)</span>
<span class="sd">        and converted the console output(default is file writing).</span>
<span class="sd">        On batch processing each end is add with new line.</span>

<span class="sd">        :param list sentences: list of sentences for batch processes</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">input_data</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>

            <span class="n">input_data</span> <span class="o">+=</span> <span class="n">sentence</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>

        <span class="n">input_data</span> <span class="o">=</span> <span class="n">input_data</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">package_directory</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span><span class="p">)</span>
        <span class="n">os_name</span> <span class="o">=</span> <span class="n">system</span><span class="p">()</span>
        <span class="n">executable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_senna_bin</span><span class="p">(</span><span class="n">os_name</span><span class="p">)</span>
        <span class="n">senna_executable</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">package_directory</span><span class="p">,</span> <span class="n">executable</span><span class="p">)</span>
        <span class="n">cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">package_directory</span><span class="p">)</span>
        <span class="n">pipe</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
            <span class="n">senna_executable</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">stdin</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>
        <span class="n">senna_stdout</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">communicate</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="n">input_data</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="n">cwd</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">senna_stdout</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="Annotator.get_dependency"><a class="viewcode-back" href="../../annotator_api.html#pntl.tools.Annotator.get_dependency">[docs]</a>    <span class="k">def</span> <span class="nf">get_dependency</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parse</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change to the Stanford parser direction and process the works</span>

<span class="sd">        :param str parse: parse is the input(tree format)</span>
<span class="sd">                  and it is writen in as file</span>

<span class="sd">        :return: stanford dependency universal format</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># package_directory = os.path.dirname(self.dep_par_path)</span>
        <span class="c1"># cwd = os.getcwd()</span>
        <span class="c1"># os.chdir(package_directory)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">senna_path</span> <span class="o">+</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">sep</span> <span class="o">+</span> <span class="s2">&quot;in.parse&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">parsefile</span><span class="p">:</span>

            <span class="n">parsefile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">parse</span><span class="p">)</span>

        <span class="n">pipe</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_jar_cli</span><span class="p">,</span>
            <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
            <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">,</span>
            <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">pipe</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

        <span class="n">stanford_out</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="c1"># print(stanford_out, &quot;\n&quot;, self.default_jar_cli)</span>
        <span class="c1"># os.chdir(cwd)</span>

        <span class="k">return</span> <span class="n">stanford_out</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span></div>

<div class="viewcode-block" id="Annotator.get_batch_annotations"><a class="viewcode-back" href="../../annotator_api.html#pntl.tools.Annotator.get_batch_annotations">[docs]</a>    <span class="k">def</span> <span class="nf">get_batch_annotations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sentences</span><span class="p">,</span> <span class="n">dep_parse</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param list sentences: list of sentences</span>
<span class="sd">        :rtype: list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">annotations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">batch_senna_tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_senna_tag_batch</span><span class="p">(</span><span class="n">sentences</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">senna_tags</span> <span class="ow">in</span> <span class="n">batch_senna_tags</span><span class="p">:</span>

            <span class="n">annotations</span> <span class="o">+=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_annoations</span><span class="p">(</span><span class="n">senna_tags</span><span class="o">=</span><span class="n">senna_tags</span><span class="p">)]</span>

        <span class="k">if</span> <span class="n">dep_parse</span><span class="p">:</span>

            <span class="n">syntax_tree</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

            <span class="k">for</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="n">annotations</span><span class="p">:</span>

                <span class="n">syntax_tree</span> <span class="o">+=</span> <span class="n">annotation</span><span class="p">[</span><span class="s2">&quot;syntax_tree&quot;</span><span class="p">]</span>

            <span class="n">dependencies</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dependency</span><span class="p">(</span><span class="n">syntax_tree</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="c1"># print (dependencies)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">dependencies</span><span class="p">):</span>

                <span class="k">for</span> <span class="n">dependencie</span><span class="p">,</span> <span class="n">annotation</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">dependencies</span><span class="p">,</span> <span class="n">annotations</span><span class="p">):</span>

                    <span class="n">annotation</span><span class="p">[</span><span class="s2">&quot;dep_parse&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dependencie</span>

        <span class="k">return</span> <span class="n">annotations</span></div>

<div class="viewcode-block" id="Annotator.get_annoations"><a class="viewcode-back" href="../../annotator_api.html#pntl.tools.Annotator.get_annoations">[docs]</a>    <span class="k">def</span> <span class="nf">get_annoations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sentence</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">senna_tags</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dep_parse</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        passing the string to senna and performing aboue given nlp process</span>
<span class="sd">        and the returning them in a form of `dict()`</span>

<span class="sd">        :param str or list sentence: a sentence or list of</span>
<span class="sd">                     sentence for nlp process.</span>
<span class="sd">        :param str or list senna_tags:  this values are by</span>
<span class="sd">                     SENNA processed string</span>
<span class="sd">        :param bool  batch: the change the mode into batch</span>
<span class="sd">                     processing process</span>
<span class="sd">        :param bool dep_parse: to tell the code and user need</span>
<span class="sd">                    to communicate with stanford parser</span>
<span class="sd">        :return: the dict() of every out in the process</span>
<span class="sd">                    such as ner, dep_parse, srl, verbs etc.</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">annotations</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">senna_tags</span><span class="p">:</span>

            <span class="n">senna_tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_senna_tag</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
            <span class="n">senna_tags</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">senna_tags</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)]</span>
            <span class="n">senna_tags</span> <span class="o">=</span> <span class="n">senna_tags</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

        <span class="k">else</span><span class="p">:</span>

            <span class="n">senna_tags</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">senna_tags</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)]</span>

        <span class="n">no_verbs</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">senna_tags</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">))</span> <span class="o">-</span> <span class="mi">6</span>

        <span class="n">words</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">chunk</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ner</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">verb</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">srls</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">syn</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">senna_tag</span> <span class="ow">in</span> <span class="n">senna_tags</span><span class="p">:</span>

            <span class="n">senna_tag</span> <span class="o">=</span> <span class="n">senna_tag</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">words</span> <span class="o">+=</span> <span class="p">[</span><span class="n">senna_tag</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>
            <span class="n">pos</span> <span class="o">+=</span> <span class="p">[</span><span class="n">senna_tag</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>
            <span class="n">chunk</span> <span class="o">+=</span> <span class="p">[</span><span class="n">senna_tag</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>
            <span class="n">ner</span> <span class="o">+=</span> <span class="p">[</span><span class="n">senna_tag</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>
            <span class="n">verb</span> <span class="o">+=</span> <span class="p">[</span><span class="n">senna_tag</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>
            <span class="n">srl</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span> <span class="o">+</span> <span class="n">no_verbs</span><span class="p">):</span>
                <span class="n">srl</span> <span class="o">+=</span> <span class="p">[</span><span class="n">senna_tag</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()]</span>
            <span class="n">srls</span> <span class="o">+=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">srl</span><span class="p">)]</span>
            <span class="n">syn</span> <span class="o">+=</span> <span class="p">[</span><span class="n">senna_tag</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>

        <span class="n">roles</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">no_verbs</span><span class="p">):</span>

            <span class="n">role</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="n">curr_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">srls</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">curr_label</span> <span class="ow">in</span> <span class="n">curr_labels</span><span class="p">:</span>

                <span class="n">splits</span> <span class="o">=</span> <span class="n">curr_label</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">splits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;S&quot;</span><span class="p">:</span>

                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>

                        <span class="k">if</span> <span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;V&quot;</span><span class="p">:</span>

                            <span class="n">role</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">words</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

                        <span class="k">else</span><span class="p">:</span>

                            <span class="k">if</span> <span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">role</span><span class="p">:</span>

                                <span class="n">role</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">words</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

                            <span class="k">else</span><span class="p">:</span>

                                <span class="n">role</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">words</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>

                        <span class="k">if</span> <span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">splits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="n">role</span><span class="p">:</span>

                            <span class="n">role</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">splits</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">words</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

                        <span class="k">else</span><span class="p">:</span>

                            <span class="n">role</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">splits</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">words</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">splits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;B&quot;</span><span class="p">:</span>

                    <span class="n">temp</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">words</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">splits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;I&quot;</span><span class="p">:</span>

                    <span class="n">temp</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">words</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">splits</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;E&quot;</span><span class="p">:</span>

                    <span class="n">temp</span> <span class="o">=</span> <span class="n">temp</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">words</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>

                        <span class="k">if</span> <span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;V&quot;</span><span class="p">:</span>

                            <span class="n">role</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

                        <span class="k">else</span><span class="p">:</span>

                            <span class="k">if</span> <span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">role</span><span class="p">:</span>

                                <span class="n">role</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">temp</span>
                                <span class="n">role</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">role</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

                            <span class="k">else</span><span class="p">:</span>

                                <span class="n">role</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

                    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">splits</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>

                        <span class="k">if</span> <span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">splits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="n">role</span><span class="p">:</span>

                            <span class="n">role</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">splits</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">temp</span>
                            <span class="n">role</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">splits</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">role</span><span class="p">[</span>
                                <span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">splits</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                            <span class="p">]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

                        <span class="k">else</span><span class="p">:</span>

                            <span class="n">role</span><span class="p">[</span><span class="n">splits</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="n">splits</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">=</span> <span class="n">temp</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

                    <span class="n">temp</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

            <span class="k">if</span> <span class="s2">&quot;V&quot;</span> <span class="ow">in</span> <span class="n">role</span><span class="p">:</span>

                <span class="n">roles</span> <span class="o">+=</span> <span class="p">[</span><span class="n">role</span><span class="p">]</span>

        <span class="n">annotations</span><span class="p">[</span><span class="s2">&quot;words&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">words</span>
        <span class="n">annotations</span><span class="p">[</span><span class="s2">&quot;pos&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">pos</span><span class="p">))</span>
        <span class="n">annotations</span><span class="p">[</span><span class="s2">&quot;ner&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">ner</span><span class="p">))</span>
        <span class="n">annotations</span><span class="p">[</span><span class="s2">&quot;srl&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">roles</span>
        <span class="n">annotations</span><span class="p">[</span><span class="s2">&quot;chunk&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">verb</span> <span class="k">if</span> <span class="n">x</span> <span class="o">!=</span> <span class="s2">&quot;-&quot;</span><span class="p">]</span>
        <span class="n">annotations</span><span class="p">[</span><span class="s2">&quot;verbs&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">chunk</span><span class="p">))</span>
        <span class="n">annotations</span><span class="p">[</span><span class="s2">&quot;dep_parse&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">annotations</span><span class="p">[</span><span class="s2">&quot;syntax_tree&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">for</span> <span class="p">(</span><span class="n">word_</span><span class="p">,</span> <span class="n">syn_</span><span class="p">,</span> <span class="n">pos_</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">words</span><span class="p">,</span> <span class="n">syn</span><span class="p">,</span> <span class="n">pos</span><span class="p">):</span>

            <span class="n">annotations</span><span class="p">[</span><span class="s2">&quot;syntax_tree&quot;</span><span class="p">]</span> <span class="o">+=</span> <span class="n">syn_</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span>
                <span class="s2">&quot;*&quot;</span><span class="p">,</span> <span class="s2">&quot;(&quot;</span> <span class="o">+</span> <span class="n">pos_</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">word_</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span>
            <span class="p">)</span>
        <span class="c1"># annotations[&#39;syntax_tree&#39;]=annotations[&#39;syntax_tree&#39;].replace(&quot;S1&quot;,&quot;S&quot;)</span>

        <span class="k">if</span> <span class="n">dep_parse</span><span class="p">:</span>

            <span class="n">annotations</span><span class="p">[</span><span class="s2">&quot;dep_parse&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_dependency</span><span class="p">(</span><span class="n">annotations</span><span class="p">[</span><span class="s2">&quot;syntax_tree&quot;</span><span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_all</span><span class="p">:</span>

            <span class="kn">from</span> <span class="nn">importlib</span> <span class="k">import</span> <span class="n">import_module</span>

            <span class="n">end_point</span> <span class="o">=</span> <span class="n">import_module</span><span class="p">(</span>
                <span class="n">f</span><span class="s2">&quot;{os.getenv(&#39;ENDPOINT_CLASS&#39;, default=&#39;snowbase.end_point.EntryPoint&#39;)}&quot;</span>
            <span class="p">)</span>
            <span class="n">end_point</span> <span class="o">=</span> <span class="n">EntryPoint</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__to_sql</span><span class="p">(</span><span class="n">annotations</span><span class="p">,</span> <span class="n">end_point</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">annotations</span></div>

    <span class="k">def</span> <span class="nf">__to_sql</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">annotations</span><span class="p">,</span> <span class="n">end_point</span><span class="p">):</span>

        <span class="n">end_point</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">annotations</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">end_point</span><span class="p">)</span>

<div class="viewcode-block" id="Annotator.save"><a class="viewcode-back" href="../../annotator_api.html#pntl.tools.Annotator.save">[docs]</a>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">end_point</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Save is wrapper function build on</span>
<span class="sd">        the top of :Class:~pntl.db.EntryPoint.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">end_point</span><span class="o">.</span><span class="n">save</span><span class="p">()</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Jawahar S

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>